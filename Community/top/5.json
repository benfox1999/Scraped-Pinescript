{"created":"2021-02-16T21:52:12.476692Z","extra":{"isMTFResolution":true,"kind":"study","sourceInputsCount":1},"scriptAccess":"open_no_auth","scriptName":"Supertrend","source":"//@version=4\r\nstudy(\"Supertrend\", overlay = true, format=format.price, precision=2, resolution=\"\")\r\n\r\nPeriods = input(title=\"ATR Period\", type=input.integer, defval=10)\r\nsrc = input(hl2, title=\"Source\")\r\nMultiplier = input(title=\"ATR Multiplier\", type=input.float, step=0.1, defval=3.0)\r\nchangeATR= input(title=\"Change ATR Calculation Method ?\", type=input.bool, defval=true)\r\nshowsignals = input(title=\"Show Buy/Sell Signals ?\", type=input.bool, defval=true)\r\nhighlighting = input(title=\"Highlighter On/Off ?\", type=input.bool, defval=true)\r\natr2 = sma(tr, Periods)\r\natr= changeATR ? atr(Periods) : atr2\r\nup=src-(Multiplier*atr)\r\nup1 = nz(up[1],up)\r\nup := close[1] > up1 ? max(up,up1) : up\r\ndn=src+(Multiplier*atr)\r\ndn1 = nz(dn[1], dn)\r\ndn := close[1] < dn1 ? min(dn, dn1) : dn\r\ntrend = 1\r\ntrend := nz(trend[1], trend)\r\ntrend := trend == -1 and close > dn1 ? 1 : trend == 1 and close < up1 ? -1 : trend\r\nupPlot = plot(trend == 1 ? up : na, title=\"Up Trend\", style=plot.style_linebr, linewidth=2, color=color.green)\r\nbuySignal = trend == 1 and trend[1] == -1\r\nplotshape(buySignal ? up : na, title=\"UpTrend Begins\", location=location.absolute, style=shape.circle, size=size.tiny, color=color.green, transp=0)\r\nplotshape(buySignal and showsignals ? up : na, title=\"Buy\", text=\"Buy\", location=location.absolute, style=shape.labelup, size=size.tiny, color=color.green, textcolor=color.white, transp=0)\r\ndnPlot = plot(trend == 1 ? na : dn, title=\"Down Trend\", style=plot.style_linebr, linewidth=2, color=color.red)\r\nsellSignal = trend == -1 and trend[1] == 1\r\nplotshape(sellSignal ? dn : na, title=\"DownTrend Begins\", location=location.absolute, style=shape.circle, size=size.tiny, color=color.red, transp=0)\r\nplotshape(sellSignal and showsignals ? dn : na, title=\"Sell\", text=\"Sell\", location=location.absolute, style=shape.labeldown, size=size.tiny, color=color.red, textcolor=color.white, transp=0)\r\nmPlot = plot(ohlc4, title=\"\", style=plot.style_circles, linewidth=0)\r\nlongFillColor = highlighting ? (trend == 1 ? color.green : color.white) : color.white\r\nshortFillColor = highlighting ? (trend == -1 ? color.red : color.white) : color.white\r\nfill(mPlot, upPlot, title=\"UpTrend Highligter\", color=longFillColor)\r\nfill(mPlot, dnPlot, title=\"DownTrend Highligter\", color=shortFillColor)\r\nalertcondition(buySignal, title=\"SuperTrend Buy\", message=\"SuperTrend Buy!\")\r\nalertcondition(sellSignal, title=\"SuperTrend Sell\", message=\"SuperTrend Sell!\")\r\nchangeCond = trend != trend[1]\r\nalertcondition(changeCond, title=\"SuperTrend Direction Change\", message=\"SuperTrend has changed direction!\")\r\n","updated":"2021-02-16T21:52:12.476692Z","version":"3.0"}