{"extra":{},"lastVersionMaj":"-1.0","scriptAccess":"open_no_auth","scriptName":"CM_MacD_Ult_MTF","source":"//Created by user ChrisMoody updated 4-10-2014\n//Regular MACD Indicator with Histogram that plots 4 Colors Based on Direction Above and Below the Zero Line\n//Update allows Check Box Options, Show MacD & Signal Line, Show Change In color of MacD Line based on cross of Signal Line.\n//Show Dots at Cross of MacD and Signal Line, Histogram can show 4 colors or 1, Turn on and off Histogram.\n//Special Thanks to that incredible person in Tech Support whoem I won't say you r name so you don't get bombarded with emails\n//Note the feature Tech Support showed me on how to set the default timeframe of the indicator to the chart Timeframe, but also allow you to choose a different timeframe.\n//By the way I fully disclose that I completely STOLE the Dots at the MAcd Cross from \"TheLark\"\n\nstudy(title=\"CM_MacD_Ult_MTF\", shorttitle=\"CM_Ult_MacD_MTF\")\nsource = close\nuseCurrentRes = input(true, title=\"Use Current Chart Resolution?\")\nresCustom = input(title=\"Use Different Timeframe? Uncheck Box Above\", type=resolution, defval=\"60\")\nsmd = input(true, title=\"Show MacD & Signal Line? Also Turn Off Dots Below\")\nsd = input(true, title=\"Show Dots When MacD Crosses Signal Line?\")\nsh = input(true, title=\"Show Histogram?\")\nmacd_colorChange = input(true,title=\"Change MacD Line Color-Signal Line Cross?\")\nhist_colorChange = input(true,title=\"MacD Histogram 4 Colors?\")\n\nres = useCurrentRes ? period : resCustom\n\nfastLength = input(12, minval=1), slowLength=input(26,minval=1)\nsignalLength=input(9,minval=1)\n\nfastMA = ema(source, fastLength)\nslowMA = ema(source, slowLength)\n\nmacd = fastMA - slowMA\nsignal = sma(macd, signalLength)\nhist = macd - signal\n\noutMacD = security(tickerid, res, macd)\noutSignal = security(tickerid, res, signal)\noutHist = security(tickerid, res, hist)\n\nhistA_IsUp = outHist > outHist[1] and outHist > 0\nhistA_IsDown = outHist < outHist[1] and outHist > 0\nhistB_IsDown = outHist < outHist[1] and outHist <= 0\nhistB_IsUp = outHist > outHist[1] and outHist <= 0\n\n//MacD Color Definitions\nmacd_IsAbove = outMacD >= outSignal\nmacd_IsBelow = outMacD < outSignal\n\nplot_color = hist_colorChange ? histA_IsUp ? aqua : histA_IsDown ? blue : histB_IsDown ? red : histB_IsUp ? maroon :yellow :gray\nmacd_color = macd_colorChange ? macd_IsAbove ? lime : red : red\nsignal_color = macd_colorChange ? macd_IsAbove ? yellow : yellow : lime\n\ncircleYPosition = outSignal\n \nplot(smd and outMacD ? outMacD : na, title=\"MACD\", color=macd_color, linewidth=4)\nplot(smd and outSignal ? outSignal : na, title=\"Signal Line\", color=signal_color, style=line ,linewidth=2)\nplot(sh and outHist ? outHist : na, title=\"Histogram\", color=plot_color, style=histogram, linewidth=4)\nplot(sd and cross(outMacD, outSignal) ? circleYPosition : na, title=\"Cross\", style=circles, linewidth=4, color=macd_color)\nhline(0, '0 Line', linestyle=solid, linewidth=2, color=white)","version":"-1.0"}