{"created":"2017-08-11T18:45:43.449808Z","extra":{"kind":"study","sourceInputsCount":0},"lastVersionMaj":"1.0","scriptAccess":"open_no_auth","scriptName":"Fibonacci levels","source":"//@version=3\r\nstudy(\"Fibonacci levels\", overlay=true, precision=8)\r\nfastperiod=input(title=\"50 MA\", defval=50, minval=1)\r\nemaperiod=input(title=\"100 MA\", defval=100, minval=1)\r\n\r\ntoc=max(open,close)\r\nboc=min(open,close)\r\n\r\neffclose=if close>=open\r\n    toc\r\nelse\r\n    boc\r\n\r\nmidline=nz(ema(effclose,emaperiod))\r\nplot(midline,color=red, title=\"mid line\", linewidth=2, transp=0)\r\n\r\ndev=stdev(effclose,emaperiod)\r\n\r\nplusdevmult=if toc>midline\r\n    (toc-midline)/dev\r\nelse\r\n    0\r\n\r\nminusdevmult=if boc<midline\r\n    (midline-boc)/dev\r\nelse\r\n    0\r\n\r\nmaxmult=max(minusdevmult,plusdevmult)\r\n\r\nlm=ema(maxmult,emaperiod)\r\nlm2=lm/2\r\nlm3=lm2*0.38196601\r\nlm4=lm*1.38196601\r\nlm5=lm*1.61803399\r\nlm6=(lm+lm2)/2\r\n\r\nplot(midline+(dev*lm5), title=\"6 up\", color=black, transp=25)\r\nplot(midline+(dev*lm4), title=\"5 up\", color=black, transp=25)\r\nplot(midline+(dev*lm), title=\"4 up\", color=black, transp=25)\r\nplot(midline+(dev*lm6), title=\"3 up\", color=black, transp=25)\r\nplot(midline+(dev*lm2), title=\"2 up\", color=black, transp=25)\r\nplot(midline+(dev*lm3), title=\"1 up\", color=black, transp=25)\r\nplot(midline-(dev*lm3), title=\"1 down\", color=black, transp=25)\r\nplot(midline-(dev*lm2), title=\"2 down\", color=black, transp=25)\r\nplot(midline-(dev*lm6), title=\"3 down\", color=black, transp=25)\r\nplot(midline-(dev*lm), title=\"4 down\", color=black, transp=25)\r\nplot(midline-(dev*lm4), title=\"5 down\", color=black, transp=25)\r\nplot(midline-(dev*lm5), title=\"6 down\", color=black, transp=25)","updated":"2017-08-11T18:45:43.449808Z","version":"1.0"}