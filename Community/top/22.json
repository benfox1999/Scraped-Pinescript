{"extra":{},"lastVersionMaj":"-1.0","scriptAccess":"open_no_auth","scriptName":"Volume Flow Indicator [LazyBear]","source":"//\r\n// @author LazyBear\r\n//\r\n// If you use this code in its original/modified form, do drop me a note. \r\n//\r\n\r\nstudy(title = \"Volume Flow Indicator [LazyBear]\", shorttitle=\"VFI_LB\")\r\n\r\nlength = input(130, title=\"VFI length\")\r\ncoef = input(0.2)\r\nvcoef = input(2.5, title=\"Max. vol. cutoff\")\r\nsignalLength=input(5)\r\nsmoothVFI=input(false, type=bool)\r\n\r\nma(x,y) => smoothVFI ? sma(x,y) : x\r\n\r\ntypical=hlc3\r\ninter = log( typical ) - log( typical[1] )\r\nvinter = stdev(inter, 30 )\r\ncutoff = coef * vinter * close\r\nvave = sma( volume, length )[1]\r\nvmax = vave * vcoef\r\nvc = iff(volume < vmax, volume, vmax) //min( volume, vmax )\r\nmf = typical - typical[1]\r\nvcp = iff( mf > cutoff, vc, iff ( mf < -cutoff, -vc, 0 ) )\r\n\r\nvfi = ma(sum( vcp , length )/vave, 3)\r\nvfima=ema( vfi, signalLength )\r\nd=vfi-vfima\r\n\r\nplot(0, color=gray, style=3)\r\nshowHisto=input(false, type=bool)\r\nplot(showHisto ? d : na, style=histogram, color=gray, linewidth=3, transp=50)\r\nplot( vfima , title=\"EMA of vfi\", color=orange)\r\nplot( vfi, title=\"vfi\", color=green,linewidth=2)\r\n","version":"-1.0"}