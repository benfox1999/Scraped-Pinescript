{"created":"2022-10-04T22:04:32.218503Z","extra":{"kind":"study","sourceInputsCount":0},"lastVersionMaj":"4.0","scriptAccess":"open_no_auth","scriptName":" Support and Resistance Levels with Breaks","source":"// This work is licensed under a Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) https://creativecommons.org/licenses/by-nc-sa/4.0/\r\n// Â© LuxAlgo\r\n\r\n//@version = 4\r\nstudy(title=\" Support and Resistance Levels with Breaks\",shorttitle = \" Support and Resistance Levels with Breaks [LuxAlgo]\", overlay = true ,  max_bars_back=1000)\r\n//\r\ntoggleBreaks  = input(true, title = \"Show Breaks\" )\r\nleftBars  = input(15, title = \"Left Bars \")\r\nrightBars  = input(15, title = \"Right Bars\")\r\nvolumeThresh  = input(20, title = \"Volume Threshold\")\r\n//\r\nhighUsePivot = fixnan(pivothigh(leftBars, rightBars)[1])\r\nlowUsePivot = fixnan(pivotlow(leftBars, rightBars)[1])\r\nr1 = plot(highUsePivot, color=change(highUsePivot) ? na : #FF0000,  linewidth=3, offset=-(rightBars+1), title=\"Resistance\")\r\ns1 = plot(lowUsePivot, color=change(lowUsePivot) ? na : #233dee,  linewidth=3, offset=-(rightBars+1), title=\"Support\")\r\n\r\n//Volume %\r\nshort = ema(volume, 5)\r\nlong = ema(volume, 10)\r\nosc = 100 * (short - long) / long\r\n\r\n\r\n//For breaks with volume\r\nplotshape(toggleBreaks and crossunder(close,lowUsePivot) and not (open - close < high - open) and osc > volumeThresh, title = \"Break\", text = 'B', style = shape.labeldown, location = location.abovebar, color= color.red,textcolor = color.white, transp = 0, size = size.tiny)\r\nplotshape(toggleBreaks and crossover(close,highUsePivot ) and not(open - low > close - open) and osc > volumeThresh, title = \"Break\", text = 'B', style = shape.labelup, location = location.belowbar, color= color.green,textcolor = color.white, transp = 0, size = size.tiny)\r\n\r\n//For bull / bear wicks\r\nplotshape(toggleBreaks and crossover(close,highUsePivot ) and open - low > close - open , title = \"Break\", text = 'Bull Wick', style = shape.labelup, location = location.belowbar, color= color.green,textcolor = color.white, transp = 0, size = size.tiny)\r\nplotshape(toggleBreaks and crossunder(close,lowUsePivot) and open - close < high - open , title = \"Break\", text = 'Bear Wick', style = shape.labeldown, location = location.abovebar, color= color.red,textcolor = color.white, transp = 0, size = size.tiny)\r\n\r\n\r\nalertcondition(crossunder(close,lowUsePivot) and osc > volumeThresh , title = \"Support Broken\" , message = \"Support Broken\")\r\nalertcondition(crossover(close,highUsePivot) and osc > volumeThresh, title = \"Resistance Broken\" , message = \"Resistance Broken\")","updated":"2022-10-04T22:04:32.218503Z","version":"4.0"}