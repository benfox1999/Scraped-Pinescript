{"extra":{},"lastVersionMaj":"-1.0","scriptAccess":"open_no_auth","scriptName":"CM_Stochastic_MTF","source":"//Created by ChrisMoody on October 23, 2014 by user request - platinumFX\r\n//Defaults to current timeframe Ability to change to different timeframe, or plot two RSI's on different timeframes.\r\nstudy(title=\"CM_Stochastic_MTF\", shorttitle=\"CM_Stoch_MTF\")\r\nlen = input(14, minval=1, title=\"Length for Main Stochastic\") \r\nsmoothK = input(3, minval=1, title=\"SmoothK for Main Stochastic\")\r\nsmoothD = input(3, minval=1, title=\"SmoothD for Main Stochastic\")\r\nupLine = input(80, minval=50, maxval=90, title=\"Upper Line Value?\")\r\nlowLine = input(20, minval=10, maxval=50, title=\"Lower Line Value?\")\r\nsml = input(true, title=\"Show Mid Line?\")\r\nsbh = input(false, title=\"Show Back Ground Highlights When Stoch is Above/Below High/Low Lines?\")\r\nsch = input(true, title=\"Show Back Ground Highlights When Stoch Cross - Strict Criteria - K Greater/LesThan High/Low Line - Crosses D ?\")\r\nsl = input(true, title=\"Show 'B' and 'S' Letters When Stoch Crosses High/Low Line & D?\")\r\nsac = input(false, title=\"Show Back Ground Highlights When Stoch Cross - Any Cross?\")\r\nsacl = input(false, title=\"Show 'B' and 'S' Letters When Stoch Crosses - Any Cross?\")\r\nuseCurrentRes = input(true, title=\"Use Current Chart Resolution?\")\r\nresCustom = input(title=\"Use Different Timeframe? Uncheck Box Above\", type=resolution, defval=\"60\")\r\nssStoch = input(false, title=\"Show 2nd Stoch?\")\r\nresCustom2 = input(title=\"Use 2nd Stoch? Check Box Above\", type=resolution, defval=\"D\")\r\nuseCurrentRes2 = input(false, title=\"Use 2nd Stoch Plot On Samet Timeframe?\")\r\nlen2 = input(14, minval=1, title=\"2nd Stoch Length\")\r\nsmoothK2 = input(3, minval=1, title=\"SmoothK for 2nd Stoch\")\r\nsmoothD2 = input(3, minval=1, title=\"SmoothD for 2nd Stoch\")\r\n//Resolutioon for MTF\r\nres = useCurrentRes ? period : resCustom\r\nres2 = useCurrentRes2 ? period : resCustom2\r\n//Stoch formula\r\nk = sma(stoch(close, high, low, len), smoothK)\r\nd = sma(k, smoothD)\r\noutK = security(tickerid, res, k)\r\noutD = security(tickerid, res, d)\r\n//Optional 2nd Stoch for additional plot\r\nk2 = sma(stoch(close, high, low, len2), smoothK2)\r\nd2 = sma(k2, smoothD2)\r\noutK2 = security(tickerid, res2, k2)\r\noutD2 = security(tickerid, res2, d2)\r\n//definitions for Cross\r\naboveLine = outK > upLine ? 1 : 0\r\nbelowLine = outK < lowLine ? 1 : 0\r\ncrossUp = (outK[1] < outD[1] and outK[1] < lowLine[1]) and (outK > outD)  ? 1 : 0\r\ncrossDn = (outK[1] > outD[1] and outK[1] > upLine[1]) and (outK < outD) ? 1 : 0\r\n//Definition for Cross that doesn't have to be above or below High and Low line.\r\ncrossUpAll = (outK[1] < outD[1] and outK > outD) ? 1 : 0\r\ncrossDownAll = (outK[1] > outD[1] and outK < outD) ? 1 : 0\r\n//BackGroound Color Plots\r\nbgcolor(sbh and aboveLine ? red : na, transp=70)\r\nbgcolor(sbh and belowLine ? lime : na, transp=70)\r\nbgcolor(sch and crossUp ? lime : na, transp=40)\r\nbgcolor(sch and crossDn ? red : na, transp=40)\r\n//plots for Cross with no filter\r\nbgcolor(sac and crossUpAll ? lime : na, transp=40)\r\nbgcolor(sac and crossDownAll ? red : na, transp=40)\r\n//Plot main Stochastic\r\nplot(outK, title=\"Stoch K\", style=line, linewidth=3, color=lime)\r\nplot(outD, title=\"Stoch D\", style=line, linewidth=3, color=red)\r\n//Ability to plot 2nd Stoch\r\nplot(ssStoch and outK2 ? outK2 : na, title=\"2nd Stoch K - Different TimeFrame\", style=line, linewidth=3, color=orange)\r\nplot(ssStoch and outD2 ? outD2 : na, title=\"2nd Stoch D - Different TimeFrame\", style=line, linewidth=3, color=yellow)\r\n\r\np1 = plot(upLine, title= \"Upper Line\", style=solid, linewidth=3, color=red)\r\np2 = plot(lowLine, title= \"Lower Line\", style=solid, linewidth=3, color=lime)\r\nplot(sml and 50 ? 50 : na, title=\"Mid Line\", style=linebr, linewidth=2, color=gray)\r\nplotchar(sl and crossUp ? crossUp : na, title=\"Buy Signal Strict Criteria\", char='B', location=location.bottom, color=lime, transp=0, offset=0)\r\nplotchar(sl and crossDn ? crossDn : na, title=\"Sell Signal Strict Criteria\", char='S', location=location.top, color=red, transp=0, offset=0)\r\nplotchar(sacl and crossUpAll ? crossUpAll : na, title=\"Buy Signal Any Cross Up\", char='B', location=location.bottom, color=lime, transp=0, offset=0)\r\nplotchar(sacl and crossDownAll ? crossDownAll : na, title=\"Sell Signal Any Cross Down\", char='S', location=location.top, color=red, transp=0, offset=0)\r\nfill(p1, p2, color=silver, transp=70)","version":"-1.0"}