{"extra":{},"scriptAccess":"open_no_auth","scriptName":"Squeeze Momentum Indicator [LazyBear]","source":"//\r\n// @author LazyBear \r\n// List of all my indicators: https://www.tradingview.com/v/4IneGo8h/\r\n//\r\nstudy(shorttitle = \"SQZMOM_LB\", title=\"Squeeze Momentum Indicator [LazyBear]\", overlay=false)\r\n\r\nlength = input(20, title=\"BB Length\")\r\nmult = input(2.0,title=\"BB MultFactor\")\r\nlengthKC=input(20, title=\"KC Length\")\r\nmultKC = input(1.5, title=\"KC MultFactor\")\r\n\r\nuseTrueRange = input(true, title=\"Use TrueRange (KC)\", type=bool)\r\n\r\n// Calculate BB\r\nsource = close\r\nbasis = sma(source, length)\r\ndev = multKC * stdev(source, length)\r\nupperBB = basis + dev\r\nlowerBB = basis - dev\r\n\r\n// Calculate KC\r\nma = sma(source, lengthKC)\r\nrange = useTrueRange ? tr : (high - low)\r\nrangema = sma(range, lengthKC)\r\nupperKC = ma + rangema * multKC\r\nlowerKC = ma - rangema * multKC\r\n\r\nsqzOn  = (lowerBB > lowerKC) and (upperBB < upperKC)\r\nsqzOff = (lowerBB < lowerKC) and (upperBB > upperKC)\r\nnoSqz  = (sqzOn == false) and (sqzOff == false)\r\n\r\nval = linreg(source  -  avg(avg(highest(high, lengthKC), lowest(low, lengthKC)),sma(close,lengthKC)), \r\n            lengthKC,0)\r\n\r\nbcolor = iff( val > 0, \r\n            iff( val > nz(val[1]), lime, green),\r\n            iff( val < nz(val[1]), red, maroon))\r\nscolor = noSqz ? blue : sqzOn ? black : gray \r\nplot(val, color=bcolor, style=histogram, linewidth=4)\r\nplot(0, color=scolor, style=cross, linewidth=2)\r\n","version":"-1.0"}